!function(){"use strict";function t(t,e,n){"addEventListener"in window?t.addEventListener(e,n,!1):"attachEvent"in window&&t.attachEvent("on"+e,n)}function e(t){return Z+"["+tt+"] "+t}function n(t){Y&&"object"==typeof window.console&&console.log(e(t))}function o(t){"object"==typeof window.console&&console.warn(e(t))}function i(){n("Initialising iFrame"),r(),a(),c("background",R),c("padding",B),g(),f(),l(),v(),m(),L("init","Init message from host page")}function r(){function t(t){return"true"===t}var e=Q.substr(_).split(":");tt=e[0],V=void 0!==e[1]?Number(e[1]):V,D=void 0!==e[2]?t(e[2]):D,Y=void 0!==e[3]?t(e[3]):Y,X=void 0!==e[4]?Number(e[4]):X,et=void 0!==e[5]?t(e[5]):et,A=void 0!==e[6]?t(e[6]):A,W=e[7],$=void 0!==e[8]?e[8]:$,R=e[9],B=e[10],rt=void 0!==e[11]?Number(e[11]):rt}function u(t,e){return-1!==e.indexOf("-")&&(o("Negative CSS value ignored for "+t),e=""),e}function c(t,e){void 0!==e&&""!==e&&"null"!==e&&(document.body.style[t]=e,n("Body "+t+' set to "'+e+'"'))}function a(){void 0===W&&(W=V+"px"),u("margin",W),c("margin",W)}function l(){document.documentElement.style.height="",document.body.style.height="",n('HTML & body height set to "auto"')}function s(){t(window,"resize",function(){L("resize","Window resized")})}function d(){t(window,"click",function(){L("click","Window clicked")})}function f(){U!==$&&($ in lt||(o($+" is not a valid option for heightCalculationMethod."),$="bodyScroll"),n('Height calculation method set to "'+$+'"'))}function m(){!0===A?(s(),d(),y()):n("Auto Resize disabled")}function g(){var t=document.createElement("div");t.style.clear="both",t.style.display="block",document.body.appendChild(t)}function v(){et&&(n("Enable public methods"),window.parentIFrame={close:function(){L("close","parentIFrame.close()",0,0)},getId:function(){return tt},reset:function(){H("parentIFrame.size")},scrollTo:function(t,e){F(e,t,"scrollTo")},scrollToOffset:function(t,e){F(e,t,"scrollToOffset")},sendMessage:function(t,e){F(0,0,"message",JSON.stringify(t),e)},setHeightCalculationMethod:function(t){$=t,f()},setTargetOrigin:function(t){n("Set targetOrigin: "+t),ot=t},size:function(t,e){var n=""+(t?t:"")+(e?","+e:"");k(),L("size","parentIFrame.size("+n+")",t,e)}})}function h(){0!==X&&(n("setInterval: "+X+"ms"),setInterval(function(){L("interval","setInterval: "+X)},Math.abs(X)))}function b(e){function o(e){(void 0===e.height||void 0===e.width||0===e.height||0===e.width)&&(n("Attach listerner to "+e.src),t(e,"load",function(){L("imageLoad","Image loaded")}))}e.forEach(function(t){if("attributes"===t.type&&"src"===t.attributeName)o(t.target);else if("childList"===t.type){var e=t.target.querySelectorAll("img");Array.prototype.forEach.call(e,function(t){o(t)})}})}function y(){function t(){var t=document.querySelector("body"),o={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},i=new e(function(t){L("mutationObserver","mutationObserver: "+t[0].target+" "+t[0].type),b(t)});n("Enable MutationObserver"),i.observe(t,o)}var e=window.MutationObserver||window.WebKitMutationObserver;e?0>X?h():t():(o("MutationObserver not supported in this browser!"),h())}function p(){function t(t){function e(t){var e=/^\d+(px)?$/i;if(e.test(t))return parseInt(t,P);var o=n.style.left,i=n.runtimeStyle.left;return n.runtimeStyle.left=n.currentStyle.left,n.style.left=t||0,t=n.style.pixelLeft,n.style.left=o,n.runtimeStyle.left=i,t}var n=document.body,o=0;return"defaultView"in document&&"getComputedStyle"in document.defaultView?(o=document.defaultView.getComputedStyle(n,null),o=null!==o?o[t]:0):o=e(n.currentStyle[t]),parseInt(o,P)}return document.body.offsetHeight+t("marginTop")+t("marginBottom")}function w(){return document.body.scrollHeight}function S(){return document.documentElement.offsetHeight}function E(){return document.documentElement.scrollHeight}function M(){for(var t=document.querySelectorAll("body *"),e=t.length,o=0,i=(new Date).getTime(),r=0;e>r;r++)t[r].getBoundingClientRect().bottom>o&&(o=t[r].getBoundingClientRect().bottom);return i=(new Date).getTime()-i,n("Parsed "+e+" HTML elements"),n("LowestElement bottom position calculated in "+i+"ms"),o}function O(){return[p(),w(),S(),E()]}function T(){return Math.max.apply(null,O())}function z(){return Math.min.apply(null,O())}function I(){return Math.max(p(),M())}function x(){return Math.max(document.documentElement.scrollWidth,document.body.scrollWidth)}function L(t,e,o,i){function r(){t in{reset:1,resetPage:1,init:1}||n("Trigger event: "+e)}function u(){J=m,at=g,F(J,at,t)}function c(){return ut&&t in q}function a(){function t(t,e){var n=Math.abs(t-e)<=rt;return!n}return m=void 0!==o?o:lt[$](),g=void 0!==i?i:x(),t(J,m)||D&&t(at,g)}function l(){return!(t in{init:1,interval:1,size:1})}function s(){return $ in nt}function d(){n("No change in size detected")}function f(){l()&&s()?H(e):t in{interval:1}||(r(),d())}var m,g;c()?n("Trigger event cancelled: "+t):a()?(r(),k(),u()):f()}function k(){ut||(ut=!0,n("Trigger event lock on")),clearTimeout(ct),ct=setTimeout(function(){ut=!1,n("Trigger event lock off"),n("--")},j)}function C(t){J=lt[$](),at=x(),F(J,at,t)}function H(t){var e=$;$=U,n("Reset trigger event: "+t),k(),C("reset"),$=e}function F(t,e,o,i,r){function u(){void 0===r?r=ot:n("Message targetOrigin: "+r)}function c(){var u=t+":"+e,c=tt+":"+u+":"+o+(void 0!==i?":"+i:"");n("Sending message to host page ("+c+")"),it.postMessage(Z+c,r)}u(),c()}function N(t){function e(){return Z===(""+t.data).substr(0,_)}function r(){Q=t.data,it=t.source,i(),K=!1,setTimeout(function(){G=!1},j)}function u(){G?n("Page reset ignored by init"):(n("Page size reset by host page"),C("resetPage"))}function c(){return t.data.split("]")[1]}function a(){return"iFrameResize"in window}function l(){return t.data.split(":")[2]in{true:1,false:1}}e()&&(K&&l()?r():"reset"===c()?u():t.data===Q||a()||o("Unexpected message ("+t.data+")"))}var A=!0,P=10,R="",V=0,W="",B="",D=!1,q={resize:1,click:1},j=128,J=1,K=!0,U="offset",$=U,G=!0,Q="",X=32,Y=!1,Z="[iFrameSizer]",_=Z.length,tt="",et=!1,nt={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},ot="*",it=window.parent,rt=0,ut=!1,ct=null,at=1,lt={offset:p,bodyOffset:p,bodyScroll:w,documentElementOffset:S,scroll:E,documentElementScroll:E,max:T,min:z,grow:T,lowestElement:I};t(window,"message",N)}();